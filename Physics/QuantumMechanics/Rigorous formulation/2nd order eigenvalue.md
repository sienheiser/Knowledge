After determing the first order [[1st order eigenvalues and eigenvector|corrections]] to the eigenvalue and eigenvector. Using $\lambda^2$ from [[Order by order decomposition]] we may move on to determining the second order correction to the eigenvalues. $\lambda^2$:

$$
\begin{equation}
\langle e_{n\delta},(H_0-h_n)\epsilon_{n\delta}^{(2)}\rangle = \langle e_{n\delta},-(W-\theta^{(1)}_{n\delta})\epsilon_{n\delta}^{(1)}+\theta_{n\delta}^{(2)}e_{n\delta}\rangle
\end{equation}

$$
The $LHS = 0$ because $H_0-h_n$ can be moves to the other side. Essentially we are left with $\langle e_{n\delta},W \epsilon_{n\delta}^{(1)}\rangle=\theta_{n\delta}^{(2)}$ which when written out is 
$$
\theta_{n\delta}^{(2)} = \langle e_{n\delta},-W P_{E^\perp}(H_0-h_n)^{-1}P_{E^\perp}We_{n\delta}\rangle
$$